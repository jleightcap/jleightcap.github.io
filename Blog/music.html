<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Jack Leightcap" />
  <meta name="date" content="2019-05-23" />
  <title>Replacing Spotify and Google Play Music on Linux</title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="../latex.css" type="text/css" />
</head>
<body>
<div id="header">
<h1 class="title">Replacing Spotify and Google Play Music on Linux</h1>
<h2 class="author">Jack Leightcap</h2>
<h3 class="date">May 23, 2019</h3>
</div>
<h1 id="background">Background</h1>
<p>In the past I've used a combination of YouTube and Spotify to listen to music on desktop. I've used YouTube a lot for discovering new music, but there is a overhead of streaming a video just for the audio, especially on slow quarantine WiFi. There's also the case to be made to try to migrate as far away from Google products as possible.</p>
<p>Spotify is much better just because it's a dedicated music platform, however its tagging (especially for classical music) is genuinely terrible. It's a toss up if the 'artist' is listed as the actual composer, the performer, the ensemble, the conductor... it's terrible and out of your control.</p>
<h1 id="music-downloading">Music Downloading</h1>
<p>If one wanted to (hypothetically) download music from YouTube, where there is usually a precompiled playlist of a full album, the best tool would be (hypothetically) <a href="https://github.com/ytdl-org/youtube-dl"><code>youtube-dl</code></a>. I've also tinkered around with <a href="https://github.com/deepjyoti30/ytmdl"><code>ytmdl</code></a> but found it to automate parts of the process that aren't particularly difficult on their own (searching for playlists from the command line versus just in a browser, for example). To download an album:</p>
<pre><code>youtube-dl -f &#39;bestaudio[ext=m4a]&#39; [PLAYLIST URL]</code></pre>
<p>And if tagging music is your thing, then I found converting everything to mp3 to be necessary (I'm sure audiophiles would cringe at this, sue me). Tagging <code>*.m4a</code> files with mp3 tagging tools seems to clobber the actual audio data.</p>
<p>A little shell script <code>tomp3</code> (placed in <code>~/.local/bin</code>, granted it's in <code>$PATH</code>) will convert any audio format to mp3:</p>
<pre><code>#!/bin/sh
ffmpeg -i &quot;$1&quot; -vn -ar 44100 -ac 2 -b:a 192k &quot;${1%.*}.mp3&quot;</code></pre>
<p>To convert all audio files downloaded to mp3:</p>
<pre><code>find *.m4a -type f -exec tomp3 {} \;</code></pre>
<h1 id="music-tagging">Music Tagging</h1>
<p>For tagging, I've used <a href="https://github.com/nicfit/eyed3"><code>eyeD3</code></a>. For an example of tagging music downloaded from a playlist,</p>
<pre><code>eyeD3 --artist &quot;[ARTIST]&quot; *.mp3                     # Tag artist name
eyeD3 --album &quot;[ALBUM]&quot; *.mp3                       # Tag album title
eyeD3 --track 1 01.mp3                              # Tag track number
eyeD3 --title &quot;First Song&quot; 01.mp3                   # Tag track title
eyeD3 --add-image &quot;cover.png:FRONT_COVER&quot; *.mp3     # Tag album art</code></pre>
<p>These tags are usually enough to sort through my music, but <code>eyeD3</code> supports tagging all <a href="https://en.wikipedia.org/wiki/ID3">ID3 metadata</a>.</p>
<h1 id="music-player">Music Player</h1>
<p>I've defaulted on <a href="https://cmus.github.io/"><code>cmus</code></a>, mostly because of its ease of use and vim-like keybindings. <a href="https://github.com/ncmpcpp/ncmpcpp"><code>ncmpcpp</code></a> supports tagging natively, and definitely has more potential for eye candy with embedded album art and audio visualizations, but <code>cmus</code> gets the job done just fine (without messing with daemons). The only two commands you need to know:</p>
<pre><code>:add [MUSIC DIRECTORY]
:update-cache</code></pre>
<center>
<img src="../Images/music-cmus.png" width="90%">
</center>
<p>No prizes for looks :)</p>
<h1 id="integration">Integration</h1>
<p>On my Android phone, I use <a href="https://krosbits.in/musicolet/">Musicolet</a>. It's impressive that freeware like Musicolet can be more featureful than Google Play Music, which I used previously.</p>
<p>In order to transfer music from a computer to an android phone, <a href="https://github.com/whoozle/android-file-transfer-linux"><code>android-file-transfer-linux</code></a> works great.</p>
<p>Finally, I like to have a some indication of what music is playing. I've used <a href="https://github.com/AntoineGagne/cmus-notify"><code>cmus-notify</code></a> before, but have since <del>not bothered getting dunst to work on Gentoo</del> moved away from desktop notifications. Instead, a module in polybar can be added easily with a small shell script, found in the top comment of <a href="https://www.reddit.com/r/Polybar/comments/66m9vh/are_there_any_modules_for_mpv_or_cmus/">this Reddit thread</a>.</p>
<center>
<img src="../Images/music-polybar.png" width="90%">
</center>
</body>
</html>
