<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Replacing Spotify and Google Play Music on Linux</title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="../style.css" type="text/css" />
</head>
<body>
<div id="header">
<h1 class="title">Replacing Spotify and Google Play Music on Linux</h1>
</div>
<p>This blog post will detail how I've managed to replace music streaming services like Spotify and Google Play Music with open source Linux alternatives.</p>
<h2 id="downloading-music-hypothetically-youtube-dl-and-ffmpeg">Downloading Music (hypothetically) — <code>youtube-dl</code> and <code>ffmpeg</code></h2>
<p>If one wanted to (hypothetically) download music from YouTube, where there is usually a precompiled playlist of a full album, the best tool would be (hypothetically) <a href="https://github.com/ytdl-org/youtube-dl"><code>youtube-dl</code></a>. I've also tinkered around with <a href="https://github.com/deepjyoti30/ytmdl"><code>ytmdl</code></a> but found it to automate parts of the process that aren't particularly difficult on their own (searching for playlists from the command line versus just in a browser, for example). To download an album:</p>
<pre><code>youtube-dl -f &#39;bestaudio[ext=m4a]&#39; [PLAYLIST URL]</code></pre>
<p>And if tagging music is your thing, then I find converting everything to mp3 to be easiest (I'm sure audiophiles would cringe at this, sue me). A little shell script <code>tomp3</code> (placed in <code>~/.local/bin</code>, granted it's in <code>$PATH</code>) will convert any audio format to mp3:</p>
<pre><code>#!/bin/sh
ffmpeg -i &quot;$1&quot; -vn -ar 44100 -ac 2 -b:a 192k &quot;${1%.*}.mp3&quot;</code></pre>
<p>To convert all audio files downloaded to mp3:</p>
<pre><code>find *.m4a -type f -exec tomp3 {} \;</code></pre>
<h2 id="tagging-music-eyed3">Tagging Music — <code>eyeD3</code></h2>
<p>For tagging, I've used <a href="https://github.com/nicfit/eyed3"><code>eyeD3</code></a>. For an example of tagging music downloaded from a playlist,</p>
<pre><code>eyeD3 --artist &quot;[ARTIST]&quot; *.mp3                 # Tag artist name
eyeD3 --album &quot;[ALBUM]&quot; *.mp3                   # Tag album title
eyeD3 --track 1 01.mp3                          # Tag track number
eyeD3 --title &quot;First Song&quot; 01.mp3               # Tag track title
eyeD3 --add-image &quot;cover.png:FRONT_COVER&quot; *.mp3 # Tag album art</code></pre>
<p>These tags are usually enough to sort through my music, but <code>eyeD3</code> supports tagging all <a href="https://en.wikipedia.org/wiki/ID3">ID3 metadata</a>.</p>
<h2 id="playing-music-cmus">Playing Music — <code>cmus</code></h2>
<p>I've defaulted on <a href="https://cmus.github.io/"><code>cmus</code></a>, mostly because of its ease of use and vim-like keybindings. <a href="https://github.com/ncmpcpp/ncmpcpp"><code>ncmpcpp</code></a> supports tagging natively, and definitely has more potential for eye candy with embedded album art and audio visualizations, but <code>cmus</code> gets the job done just fine (without messing with daemons). The only two commands you need to know:</p>
<pre><code>:add [MUSIC DIRECTORY]
:update-cache</code></pre>
<div style="text-align:center">
<p><img src="../Images/music-cmus.png" width="80%"></p>
</div>
<p>No prizes for looks :)</p>
<h2 id="integrating-with-android-polybar">Integrating with Android, <code>polybar</code></h2>
<p>On my Android phone, I use <a href="https://krosbits.in/musicolet/">Musicolet</a>. It's impressive that freeware like Musicolet can be more featureful than Google Play Music, which I used previously.</p>
<p>In order to transfer music from a computer to an android phone, <a href="https://github.com/whoozle/android-file-transfer-linux"><code>android-file-transfer-linux</code></a> works great.</p>
<p>Finally, I like to have a some indication of what music is playing. I've used <a href="https://github.com/AntoineGagne/cmus-notify"><code>cmus-notify</code></a> before, but have since moved away from desktop notifications. Instead, a module in polybar can be added easily with a small shell script, found in the top comment of <a href="https://www.reddit.com/r/Polybar/comments/66m9vh/are_there_any_modules_for_mpv_or_cmus/">this Reddit thread</a>.</p>
<div style="text-align:center">
<p><img src="../Images/music-polybar.png" width="80%"></p>
</div>
</body>
</html>
